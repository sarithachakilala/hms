
<div id="form_name_display">
	<table width="100%" border=0" cellspacing="0" cellpadding="0">
  	<tr>
    		<td width="50%">IP Patients >>&nbsp;&nbsp;&nbsp;<a HREF='/admissions?user_id=<%= @person.id %>' class="nav" style="text-decoration:none;">Admission</a></td>
    		<td align="right" width="50%"><%= format_date(:short, Date.today ) %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
  	</tr>
	</table>
</div><BR/>
<center><h3><font color="#015a84">Admission Records</font></h3>
<%= link_to 'New', new_admission_path, :class=>"new1" %>
</center>
<!-- code for field search	 -->
<script type="text/javascript">
	var type
	function clear_file()
	{
		document.getElementById("admn_search").value=""
		document.getElementById("mr_no_search").value=""
		document.getElementById("name_search").value=""
		document.getElementById("admn_date_search").value=""
		document.getElementById("bed_search").value=""
		document.getElementById("room_search").value=""
		document.getElementById("ward_search").value=""
	}
 </script>
<div align="center" width="100%">
<table class="tablesorter" border="0" cellpadding="0" cellspacing="1" >
<tr></tr>
	<tr>
	<td width="7%">&nbsp;</td>
		<%= javascript_include_tag:defaults %>
	<td width="10%"><input type="text" style="width:100%" id="admn_search" onKeyUp = "search_function(id,event)" placeholder="Search Admn No"></td>
					<%= observe_field 'admn_search', :frequency => 0.2,
					:update => :name,
					:url => {:action => :observe_field_ex },
					:with => "'&admn_search=' + escape($('admn_search').value)+ '&mr_no_search=' + escape($('mr_no_search').value)+ '&name_search=' + escape($('name_search').value)+ '&admn_date_search=' + escape($('admn_date_search').value)+ '&bed_search=' + escape($('bed_search').value)+ '&room_search=' + escape($('room_search').value)+ '&ward_search=' + escape($('ward_search').value)  " %>
	<td width="10%"><input type="text" style="width:100%" id="mr_no_search" onKeyUp = "search_function(id,event)" placeholder="Search MR No"></td>
					<%= observe_field 'mr_no_search', :frequency => 0.2,
					:update => :name,
					:url => {:action => :observe_field_ex },
					:with => "'&admn_search=' + escape($('admn_search').value)+ '&mr_no_search=' + escape($('mr_no_search').value)+ '&name_search=' + escape($('name_search').value)+ '&admn_date_search=' + escape($('admn_date_search').value)+ '&bed_search=' + escape($('bed_search').value)+ '&room_search=' + escape($('room_search').value)+ '&ward_search=' + escape($('ward_search').value)  " %>
	<td width="10%"><input type="text" style="width:100%" id="name_search" onKeyUp = "search_function(id,event)" placeholder="Search Patient Name"></td>
					<%= observe_field 'name_search', :frequency => 0.2,
					:update => :name,
					:url => {:action => :observe_field_ex },
					:with => "'&admn_search=' + escape($('admn_search').value)+ '&mr_no_search=' + escape($('mr_no_search').value)+ '&name_search=' + escape($('name_search').value)+ '&admn_date_search=' + escape($('admn_date_search').value)+ '&bed_search=' + escape($('bed_search').value)+ '&room_search=' + escape($('room_search').value)+ '&ward_search=' + escape($('ward_search').value)  " %>
	<td width="10%"><input type="text" style="width:100%" id="admn_date_search" onKeyUp = "search_function(id,event)" placeholder="Search Admn Date"></td>
					<%= observe_field 'admn_date_search', :frequency => 0.2,
					:update => :name,
					:url => {:action => :observe_field_ex },
					:with => "'&admn_search=' + escape($('admn_search').value)+ '&mr_no_search=' + escape($('mr_no_search').value)+ '&name_search=' + escape($('name_search').value)+ '&admn_date_search=' + escape($('admn_date_search').value)+ '&bed_search=' + escape($('bed_search').value)+ '&room_search=' + escape($('room_search').value)+ '&ward_search=' + escape($('ward_search').value)  " %>
	<td width="10%"><input type="text" style="width:100%" id="bed_search" onKeyUp = "search_function(id,event)" placeholder="Search Bed"></td>
					<%= observe_field 'bed_search', :frequency => 0.2,
					:update => :name,
					:url => {:action => :observe_field_ex },
					:with => "'&admn_search=' + escape($('admn_search').value)+ '&mr_no_search=' + escape($('mr_no_search').value)+ '&name_search=' + escape($('name_search').value)+ '&admn_date_search=' + escape($('admn_date_search').value)+ '&bed_search=' + escape($('bed_search').value)+ '&room_search=' + escape($('room_search').value)+ '&ward_search=' + escape($('ward_search').value)  " %>
	<td width="10%"><input type="text" style="width:100%" id="room_search" onKeyUp = "search_function(id,event)" placeholder="Search Room"></td>
					<%= observe_field 'room_search', :frequency => 0.2,
					:update => :name,
					:url => {:action => :observe_field_ex },
					:with => "'&admn_search=' + escape($('admn_search').value)+ '&mr_no_search=' + escape($('mr_no_search').value)+ '&name_search=' + escape($('name_search').value)+ '&admn_date_search=' + escape($('admn_date_search').value)+ '&bed_search=' + escape($('bed_search').value)+ '&room_search=' + escape($('room_search').value)+ '&ward_search=' + escape($('ward_search').value)  " %>
	<td width="10%"><input type="text" style="width:100%" id="ward_search" onKeyUp = "search_function(id,event)" placeholder="Search Ward"></td>
					<%= observe_field 'ward_search', :frequency => 0.2,
					:update => :name,
					:url => {:action => :observe_field_ex },
					:with => "'&admn_search=' + escape($('admn_search').value)+ '&mr_no_search=' + escape($('mr_no_search').value)+ '&name_search=' + escape($('name_search').value)+ '&admn_date_search=' + escape($('admn_date_search').value)+ '&bed_search=' + escape($('bed_search').value)+ '&room_search=' + escape($('room_search').value)+ '&ward_search=' + escape($('ward_search').value)  " %>
	<td colspan="3" align="center" valign="top">
		<%= link_to 'Clear','', :class=>"new1",:onClick => "clear_file()"  %>
	</td>
  </tr>
</table>
</div>


 <!-- End of the Code for field search	 -->
 
  <div id="name">
<table id="tablesorter-demo" class="tablesorter" border="0" cellpadding="0" cellspacing="1">
<thead>
  <tr>
	<th>S.No</th> 	
    <th>Admn.NO</th>
    <th>MR NO</th>
	<th>Patient Name</th>
    <th>Admn.Date</th>
    <th>Bed</th>
    <th>Room</th>
    <th>Ward</th>
    <th colspan="2" align="center">Permissions</th>  <br />
</thead>
<tbody>
<% @i=0 %>
<% @admissions.each do |admission| %>
<% if((@i % 2)==0) 
		id="datacellone"
	else
		id="datacelltwo"
  end %>
	<tr class='<%= id %>' style="height:30px">
	<td><%= @i+=1 %></td>
    <td><%=h admission.admn_no %></td>
    <td><%=h admission.mr_no %></td>
	<td><%=h admission.patient_name %></td>
    <td><%=h admission.admn_date %></td>
   	<td><%=h admission.bed %></td>
    <td><%=h admission.room %></td>
    <td><%=h admission.ward %></td>

	<td align="center"><%= link_to '&nbsp;&nbsp;&nbsp;Edit&nbsp;&nbsp;&nbsp;', edit_admission_path(admission), :class=>"submit_button" %></td>   
	<td  align="center"><%= link_to '&nbsp;&nbsp;&nbsp;Print&nbsp;&nbsp;&nbsp;', {:action => 'report1', :id => admission.id, :format =>"pdf" , :print_type=>"duplicate"}, :class=>"submit_button" %></td>


<% end %>
</tbody>
</table>
<br />
</div>
</div>
<p align="right"><div align="right"><%= will_paginate @admissions,  :style => "font: bold 15px Arial red;" %></p>

